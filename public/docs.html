<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation - CNS Studios</title>
    <link rel="stylesheet" href="docs.css">
    <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
</head>
<body>
    <header>
        <div class="logo">CNS Studios</div>
        <nav>
            <a href="/github">Github</a>
            <a href="/contact">Contact</a>
            <a href="/docs">Docs</a>
            <a href="/support">Support</a>
        </nav>
        <a href="/" class="back-home">← HOME</a>
    </header>

    <div class="docs-container">
        <aside class="docs-sidebar">
            <div class="sidebar-header">
                <h2>CONTENTS</h2>
            </div>
            <nav class="docs-nav">
                <a href="#tldr" class="nav-item active">TL;DR</a>
                <a href="#get-started" class="nav-item">Get Started</a>
                <a href="#installation" class="nav-item">Installation</a>
                <a href="#authentication" class="nav-item">Authentication</a>
                <a href="#api-reference" class="nav-item">API Reference</a>
                <a href="#deployment" class="nav-item">Deployment</a>
                <a href="#examples" class="nav-item">Examples</a>
                <a href="#troubleshooting" class="nav-item">Troubleshooting</a>
                <a href="#changelog" class="nav-item">Changelog</a>
            </nav>
        </aside>

        <main class="docs-content">
            <section id="tldr" class="doc-section">
                <h1 class="section-title">TL;DR - QUICK START</h1>
                <div class="tldr-box">
                    <div class="tldr-item">
                        <span class="step-number">01</span>
                        <div>
                            <h3>CLONE REPOSITORY</h3>
                            <code>git clone https://github.com/cns-studios/project.git</code>
                        </div>
                    </div>
                    <div class="tldr-item">
                        <span class="step-number">02</span>
                        <div>
                            <h3>INSTALL DEPENDENCIES</h3>
                            <code>npm install</code>
                        </div>
                    </div>
                    <div class="tldr-item">
                        <span class="step-number">03</span>
                        <div>
                            <h3>CONFIGURE ENVIRONMENT</h3>
                            <code>cp .env.example .env</code>
                        </div>
                    </div>
                    <div class="tldr-item">
                        <span class="step-number">04</span>
                        <div>
                            <h3>START SERVER</h3>
                            <code>npm start</code>
                        </div>
                    </div>
                </div>
            </section>

            <section id="get-started" class="doc-section">
                <h1 class="section-title">GET STARTED</h1>
                <p class="doc-text">
                    Welcome to CNS Studios documentation. This guide will help you integrate our 
                    systems into your projects. Our platform provides enterprise-grade solutions 
                    with retro-inspired interfaces.
                </p>
                <div class="info-box">
                    <h3>PREREQUISITES</h3>
                    <ul>
                        <li>Node.js 16.x or higher</li>
                        <li>npm or yarn package manager</li>
                        <li>Basic knowledge of JavaScript/Node.js</li>
                        <li>Terminal/command line experience</li>
                    </ul>
                </div>
                <div class="warning-box">
                    <h3>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon">
                            <path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" />
                        </svg>
                        IMPORTANT
                    </h3>
                    <p>Make sure to configure your .env file before starting the server. 
                    Missing environment variables will cause authentication to fail.</p>
                </div>
            </section>

            <section id="installation" class="doc-section">
                <h1 class="section-title">INSTALLATION</h1>
                <h2 class="subsection-title">STEP 1: CLONE PROJECT</h2>
                <div class="code-block">
                    <pre><code>git clone https://github.com/cns-studios/project.git
cd project</code></pre>
                </div>

                <h2 class="subsection-title">STEP 2: INSTALL PACKAGES</h2>
                <div class="code-block">
                    <pre><code>npm install</code></pre>
                </div>
                <p class="doc-text">This will install all required dependencies including:</p>
                <ul>
                    <li>Express.js - Web framework</li>
                    <li>Axios - HTTP client for Auth Service</li>
                </ul>

                <h2 class="subsection-title">STEP 3: ENVIRONMENT SETUP</h2>
                <div class="code-block">
                    <pre><code># Create .env file
PORT=3000
AUTH_SERVICE_URL=https://auth.cns-studios.com
NODE_ENV=development</code></pre>
                </div>
            </section>

            <section id="authentication" class="doc-section">
                <h1 class="section-title">AUTHENTICATION</h1>
                <p class="doc-text">
                    CNS Studios uses a centralized Authentication Service. Users are redirected to the Auth Service for login and signup.
                </p>

                <h2 class="subsection-title">SSO REDIRECT</h2>
                <p class="doc-text">
                    When a user clicks "LOGIN", they are redirected to the configured Auth Service URL. After successful authentication, a secure session cookie is set on the shared domain.
                </p>
            </section>

            <section id="api-reference" class="doc-section">
                <h1 class="section-title">API REFERENCE</h1>
                
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="http-method get">GET</span>
                        <span class="endpoint-path">/api/auth/status</span>
                    </div>
                    <p class="doc-text">Check authentication status via Auth Service proxy</p>
                    <div class="code-block">
                        <pre><code>
{
  "authenticated": true,
  "user": {
    "username": "player1",
    "id": "uuid-here"
  }
}</code></pre>
                    </div>
                </div>

                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="http-method get">GET</span>
                        <span class="endpoint-path">/health</span>
                    </div>
                    <p class="doc-text">Service health check for Coolify</p>
                    <div class="code-block">
                        <pre><code>
{
  "status": "up"
}</code></pre>
                    </div>
                </div>
            </section>

            <section id="deployment" class="doc-section">
                <h1 class="section-title">DEPLOYMENT</h1>
                
                <h2 class="subsection-title">PRODUCTION CHECKLIST</h2>
                <div class="warning-box">
                    <ul>
                        <li>✓ Set AUTH_SERVICE_URL</li>
                        <li>✓ Set NODE_ENV=production</li>
                        <li>✓ Enable HTTPS for secure cookies</li>
                        <li>✓ Configure proper Coolify domain</li>
                        <li>✓ Verify Docker health checks</li>
                    </ul>
                </div>

                <h2 class="subsection-title">ENVIRONMENT VARIABLES</h2>
                <div class="code-block">
                    <pre><code>PORT=3000
AUTH_SERVICE_URL=https://auth.cns-studios.com
NODE_ENV=production</code></pre>
                </div>
            </section>

            <section id="examples" class="doc-section">
                <h1 class="section-title">EXAMPLES</h1>
                
                <h2 class="subsection-title">CHECK AUTH STATUS</h2>
                <div class="code-block">
                    <pre><code>async function checkAuth() {
  const response = await fetch('/api/auth/status');
  const data = await response.json();
  
  if (data.authenticated) {
    console.log('User:', data.user.username);
  } else {
    console.log('Not authenticated');
  }
}</code></pre>
                </div>
            </section>

            <section id="troubleshooting" class="doc-section">
                <h1 class="section-title">TROUBLESHOOTING</h1>
                
                <div class="issue-box">
                    <h3>ERROR: AUTH_SERVICE_URL not defined</h3>
                    <p><strong>Solution:</strong> Create .env file with AUTH_SERVICE_URL variable</p>
                </div>

                <div class="issue-box">
                    <h3>Service Unhealthy in Coolify</h3>
                    <p><strong>Solution:</strong> Check logs and ensure the /health endpoint is reachable</p>
                </div>

                <div class="issue-box">
                    <h3>Cookies not persisting</h3>
                    <p><strong>Solution:</strong> Ensure COOKIE_DOMAIN matches the shared parent domain</p>
                </div>
            </section>

            <section id="changelog" class="doc-section">
                <h1 class="section-title">CHANGELOG</h1>
                
                <div class="changelog-entry">
                    <h3>v2.0.0 - 2025-05-20</h3>
                    <ul>
                        <li>✓ Migrated to Coolify</li>
                        <li>✓ Switched to External Auth Service SSO</li>
                        <li>✓ Removed internal SQLite database</li>
                        <li>✓ Added health checks</li>
                        <li>✓ Cleaned up code comments</li>
                    </ul>
                </div>

                <div class="changelog-entry">
                    <h3>v1.0.0 - 2024-01-15</h3>
                    <ul>
                        <li>✓ Initial release</li>
                        <li>✓ Cookie-based authentication</li>
                        <li>✓ SQLite database integration</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <footer>
        <div class="footer-links">
            <a href="/policy">Privacy Policy</a>
            <a href="/tos">Terms of Service</a>
            <a href="/contact">Contact</a>
            <a href="/docs">Documentation</a>
            <a href="/support">Support</a>
        </div>
        <div class="copyright">
            © 2025 CNS STUDIOS
        </div>
    </footer>

    <script src="/src/docs.js"></script>
</body>
</html>